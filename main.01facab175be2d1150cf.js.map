{"version":3,"sources":["webpack:///./js/servises/apiService.js","webpack:///./js/news.js"],"names":["query","pageNumber","buttomPosition","baseUrl","key","fetchImages","requestParam","this","fetch","then","responce","json","refs","searchForm","document","querySelector","articleList","loadMore","e","apiService","getBoundingClientRect","bottom","data","markup","getTamplite","hits","insertAdjacentHTML","reduce","acc","foto","webformatURL","largeImageURL","likes","views","comments","downloads","addEventListener","preventDefault","currentTarget","elements","value","innerHTML","window","scrollTo","top","left","behavior","console","log","documentElement","clientHeight"],"mappings":"2JAIe,GACXA,MAAO,GACPC,WAAY,EACZC,eAAe,EACfC,QAAQ,2BACVC,IAAK,qCAEJC,YAPY,WAQZ,IAAMC,EAAe,8CAA8CC,KAAKP,MAAtD,SAAoEO,KAAKN,WAAzE,oBAAuGM,KAAKH,IAC7H,OAAOI,MAAMD,KAAKJ,QAAUG,GAAcG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,YCZlEC,EAAO,CACXC,WAAYC,SAASC,cAAc,eACnCC,YAAaF,SAASC,cAAc,YACpCE,SAAUH,SAASC,cAAc,oCASnC,SAASE,EAAUC,GACfC,EAAWjB,eAAeU,EAAKI,YAAYI,wBAAwBC,OACnEF,EAAWlB,YAAY,EACvBkB,EAAWd,cAAcI,MAAK,SAAAa,GAE1B,IAAMC,EAASC,EAAYF,EAAKG,MAChCb,EAAKI,YAAYU,mBAAmB,YAAaH,MAiCzD,SAASC,EAAYF,GACnB,OAAOA,EAAKK,QAAO,SAACC,EAAKC,GACvB,OAAQD,EAAO,qCACRC,EAAKC,aADD,wBACqCD,EAAKE,cAD1C,yGAMTF,EAAKG,MANI,yFAUTH,EAAKI,MAVI,sFAcTJ,EAAKK,SAdI,4FAkBVL,EAAKM,UAlBK,4BAsBV,IApELvB,EAAKC,WAAWuB,iBAAiB,UAgCjC,SAAiClB,GAC/BA,EAAEmB,iBACFlB,EAAWlB,WAAW,EAEtBkB,EAAWnB,MAAQkB,EAAEoB,cAAcC,SAASvC,MAAMwC,MAElDrB,EAAWd,cAAcI,MAAK,SAAAa,GAC5B,IAAMC,EAASC,EAAYF,EAAKG,MAChCb,EAAKI,YAAYyB,UAAYlB,QAvCjCX,EAAKK,SAASmB,iBAAiB,QAAQnB,GACvCL,EAAKK,SAASmB,iBAAiB,SAsB/B,WACIM,OAAOC,SAAS,CACZC,IAAIzB,EAAWjB,eACf2C,KAAM,EACNC,SAAU,cAzBlBJ,OAAON,iBAAiB,UAaxB,WAEA,GADIW,QAAQC,IAAI,SACZlC,SAASmC,gBAAgB7B,wBAAwBC,OAASP,SAASmC,gBAAgBC,aAAa,IAG9F,OAFFH,QAAQC,IAAI,OACZ/B,O","file":"main.01facab175be2d1150cf.js","sourcesContent":["\r\n//  https://pixabay.com/api/\r\n//  ?image_type=photo&orientation=horizontal&q=что_искать&page=номер_страницы&per_page=12&\r\n//  key=твой_ключ\r\nexport default {\r\n    query: '',\r\n    pageNumber: 1,\r\n    buttomPosition:0,\r\n    baseUrl:'https://pixabay.com/api/',\r\n  key: '16056306-b774bb8eb3846f9eca7b7b057',\r\n\r\n   fetchImages() {\r\n   const requestParam = `?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.pageNumber}&per_page=12&key=${this.key}`;\r\n    return fetch(this.baseUrl + requestParam).then(responce => responce.json());\r\n  },\r\n};\r\n","import apiService from './servises/apiService';\r\nconst refs = {\r\n  searchForm: document.querySelector('#searchForm'),\r\n  articleList: document.querySelector('.gallery'),\r\n  loadMore: document.querySelector('button[date-action=\"load-more\"]'),\r\n  // const list = document.querySelector(\".gallery\");\r\n};\r\n// console.log(apiService);\r\nrefs.searchForm.addEventListener('submit', searchFormSubmitHandler);\r\nrefs.loadMore.addEventListener('click',loadMore);\r\nrefs.loadMore.addEventListener('click',scroll);\r\nwindow.addEventListener('scroll',infScrol);\r\n\r\nfunction loadMore (e){\r\n    apiService.buttomPosition=refs.articleList.getBoundingClientRect().bottom\r\n    apiService.pageNumber+=1;\r\n    apiService.fetchImages().then(data => {\r\n\r\n        const markup = getTamplite(data.hits);\r\n        refs.articleList.insertAdjacentHTML('beforeend', markup);\r\n      })\r\n      \r\n}\r\n\r\nfunction infScrol() {\r\n    console.log('222');\r\nif (document.documentElement.getBoundingClientRect().bottom < document.documentElement.clientHeight+10){\r\n    console.log('111');\r\n    loadMore()\r\n}else return\r\n}\r\n\r\nfunction scroll (){\r\n    window.scrollTo({\r\n        top:apiService.buttomPosition,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n      });\r\n}\r\n\r\nfunction searchFormSubmitHandler(e) {\r\n  e.preventDefault();\r\n  apiService.pageNumber=1;\r\n\r\n  apiService.query = e.currentTarget.elements.query.value;\r\n\r\n  apiService.fetchImages().then(data => {\r\n    const markup = getTamplite(data.hits);\r\n    refs.articleList.innerHTML = markup;\r\n  });\r\n}\r\n\r\nfunction getTamplite(data) {\r\n  return data.reduce((acc, foto) => {\r\n    return (acc += `<li class=\"photo-card\">\r\n<img src=${foto.webformatURL} alt=\"\" data-bigfoto=${foto.largeImageURL} />\r\n\r\n<div class=\"stats\">\r\n  <p class=\"stats-item\">\r\n    <i class=\"material-icons\">thumb_up</i>\r\n    ${foto.likes}\r\n  </p>\r\n  <p class=\"stats-item\">\r\n    <i class=\"material-icons\">visibility</i>\r\n    ${foto.views}\r\n  </p>\r\n  <p class=\"stats-item\">\r\n    <i class=\"material-icons\">comment</i>\r\n    ${foto.comments}\r\n  </p>\r\n  <p class=\"stats-item\">\r\n    <i class=\"material-icons\">cloud_download</i>\r\n   ${foto.downloads}\r\n  </p>\r\n</div>\r\n</li>`);\r\n  }, '');\r\n}\r\n"],"sourceRoot":""}